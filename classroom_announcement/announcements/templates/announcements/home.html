<!--
    Home Dashboard Template for Classroom Announcement Application
    
    This template serves as the main dashboard for authenticated users, providing:
    - Welcome message with user's name
    - Navigation to create new rooms or join existing ones
    - Display of owned rooms with management links
    - Display of joined rooms with role indicators
    - Quick access to account information
    
    Layout Features:
    - Responsive grid system for room cards
    - Glassmorphism design with backdrop blur effects
    - Role-based styling for different room types
    - Empty state messaging for new users
    
    Navigation Elements:
    - Account button in top navigation
    - Create Room and Join Room action buttons
    - Direct links to individual room details
    - Logout functionality
    
    Context Variables:
    - user: Current authenticated user
    - user_rooms: Rooms created by the user (owner)
    - member_rooms: Rooms where user is a member
    - has_rooms: Boolean for conditional display
-->

{% extends 'announcements/app_base.html' %}
{% load static %}

{% block title %}Home - ClassroomHub{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'announcements/home.css' %}" />
<style>
.home-container {
    min-height: 100vh;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
}

.navbar {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.nav-brand {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.logo {
    font-size: 2rem;
    background: linear-gradient(135deg, #4a956b, #5ba872);
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.nav-brand h2 {
    margin: 0;
    color: #1a202c;
}

.nav-menu {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.welcome-text {
    color: #2d3748;
    font-weight: 500;
}

.welcome-text strong {
    color: #4a956b;
}

.main-content {
    padding: 3rem 2rem;
    max-width: 1200px;
    margin: 0 auto;
}

.hero {
    text-align: center;
    margin-bottom: 3rem;
}

.hero h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, #4a956b, #5ba872);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.hero p {
    font-size: 1.2rem;
    color: #4a5568;
}

.content-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.card {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: transform 0.3s ease;
}

.card:hover {
    transform: translateY(-5px);
}

.card h3 {
    margin-bottom: 1rem;
    color: #1a202c;
}

.card p {
    margin-bottom: 1.5rem;
}

.no-room-alert {
    background: #fff3cd;
    color: #856404;
    padding: 1rem;
    border-radius: 8px;
    text-align: center;
    margin-top: 2rem;
    font-weight: 500;
}

@media (max-width: 768px) {
    .navbar {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
    }
    
    .nav-menu {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .main-content {
        padding: 2rem 1rem;
    }
    
    .hero h1 {
        font-size: 2.5rem;
    }
    
    .content-grid {
        grid-template-columns: 1fr;
    }
}

.user-rooms {
    margin-top: 3rem;
}

.user-rooms h2 {
    font-size: 1.8rem;
    color: #1a202c;
    margin-bottom: 1.5rem;
    text-align: center;
}

.room-card {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border-radius: 16px;
    padding: 2rem;
    margin-bottom: 1rem;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: transform 0.3s ease;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.room-card:hover {
    transform: translateY(-5px);
}

.room-card h3 {
    color: #1a202c;
    margin-bottom: 0.5rem;
    font-size: 1.3rem;
}

.room-card p {
    color: #4a5568;
    margin-bottom: 0.5rem;
}

.room-card strong {
    color: #4a956b;
    font-weight: 600;
}

.no-room-alert {
    background: rgba(255, 193, 7, 0.1);
    border: 1px solid rgba(255, 193, 7, 0.3);
    color: #856404;
    padding: 2rem;
    border-radius: 16px;
    text-align: center;
    margin-top: 2rem;
    font-size: 1.1rem;
}
</style>
{% endblock %}

{% block content %}
<div class="home-container">
    <nav class="navbar">
        <div class="nav-brand">
            <div class="logo">ðŸ“¢</div>
            <h2>ClassroomHub</h2>
        </div>
        <div class="nav-menu">
            {% if user.is_authenticated %}
                <span class="welcome-text">Welcome, <strong>{{ user.username }}</strong>!</span>
                <a href="{% url 'account' %}" class="btn btn-primary">Account</a>
                <a href="{% url 'logout' %}" class="btn btn-secondary">Logout</a>
            {% else %}
                <a href="{% url 'sign_in' %}" class="btn btn-primary">Sign In</a>
            {% endif %}
        </div>
    </nav>

    <main class="main-content">
        <section class="hero">
            <h1> Welcome to your Dashboard! </h1>
            <div>
                <a href="{% url 'create_room' %}">
                    <button class="btn btn-primary"> 
                        Create room
                    </button>
                </a>
                <a href="{% url 'join_room' %}">
                    <button class="btn btn-secondary"> Join room </button>
                </a>
            </div>
        </section>

        {% if has_rooms %}
            <section class="user-rooms">
                <h2>Your Rooms</h2>
                {% for room in user_rooms %}
                    <div class="room-card">
                        <div>
                            <h3>{{ room.room_name }}</h3>
                            <p>Room Code: <strong>{{ room.room_code }}</strong></p>
                            <p>Created: {{ room.created_at|date:"M d, Y" }}</p>
                        </div>
                        <div>
                            <a href="{% url 'room_detail' room.id %}" class="btn btn-secondary">View Room</a>
                        </div>
                    </div>
                {% endfor %}
            </section>
        {% else %}
            <section class="no-room-alert">
                Looks like you do not have a room yet. Create one or join one to get started!
            </section>
        {% endif %}
    </main>
</div>
{% endblock %}
